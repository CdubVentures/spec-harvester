file_path,status,complete,implementation_order,sprint,next_action,audit_basis,completed_at
implementation/ai-indexing-plans/parsing-managament/01-static-html-parsing.md,full,yes,,,COMPLETE — no action required.,Shipped code/tests and runtime integration.,2026-02-20T12:00
implementation/ai-indexing-plans/parsing-managament/02-dynamic-js-rendered-parsing.md,full,yes,,,COMPLETE — no action required.,Shipped with dynamic crawler service; telemetry; and GUI proof.,2026-02-20T12:00
implementation/ai-indexing-plans/parsing-managament/03-main-article-extraction.md,full,yes,,,COMPLETE — no action required.,Shipped with policy overrides; telemetry; and GUI leaderboard.,2026-02-20T12:00
implementation/ai-indexing-plans/parsing-managament/04-html-spec-table-extraction.md,full,yes,,,COMPLETE — no action required.,Shipped with table parser V2 behavior and runtime wiring.,2026-02-20T12:00
implementation/ai-indexing-plans/parsing-managament/05-embedded-json-structured-metadata.md,full,yes,,,COMPLETE — no action required.,Shipped baseline with sidecar + merger + GUI counters.,2026-02-20T12:00
implementation/ai-indexing-plans/parsing-managament/06-text-pdf-extraction.md,full,yes,,,COMPLETE — no action required.,Shipped baseline with backend router; normalized surfaces; and GUI proof.,2026-02-20T12:00
src/utils/identityNormalize.js,full,yes,,S1-decompose,COMPLETE — Extracted 4 identity functions (normalizeIdentityToken; ambiguityLevelFromFamilyCount; normalizeAmbiguityLevel; resolveIdentityLockStatus) from runProduct.js and needsetEngine.js. 29 tests; 0 regressions.,Sprint 1 Item 1 — TDD extraction completed.,2026-02-20T12:00
src/pipeline/runOrchestrator.js,full,yes,,S1-decompose,COMPLETE — Created RunOrchestrator shell with buildRoundContext; evaluateRoundProgress; evaluateStopConditions; orchestrateRound. 26 tests; 0 regressions. Provides Phase 09 convergence seam.,Sprint 1 Item 2 — TDD creation completed. Phase 09 will extend this module.,2026-02-20T12:00
src/pipeline/fetchParseWorker.js,full,yes,,S1-decompose,COMPLETE — Extracted 15 fetch/parse/host-budget helpers from runProduct.js. 52 tests; 0 regressions. runProduct.js reduced by 228 lines.,Sprint 1 Item 3 — TDD extraction completed.,2026-02-20T12:00
src/pipeline/runOrchestrator.js (convergenceLoop),full,yes,,S2-convergence,COMPLETE — Phase 09 TDD: 22 tests for convergence loop (summarizeRoundProgress; buildNeedSetDispatch; runConvergenceLoop). Round-0 bootstrap; round-N NeedSet-driven dispatch; stop conditions (complete/max_rounds/no_progress); round metadata; event emission.,Sprint 2 Items 4-7 — TDD round controller + NeedSet dispatch + stop conditions implemented in runOrchestrator.js.,2026-02-20T12:00
src/pipeline/identityGateExtraction.js,full,yes,,S2-convergence,COMPLETE — Phase 08 identity gate enforcement: applyIdentityGateToCandidates + isIdentityGatedField. 13 tests. Wired into runProduct.js after evaluateSourceIdentity. Candidates from identity-failed sources get confidence-capped and tagged with identity_reject_reason.,Sprint 2 Item 8 — Identity gate on extraction evidence implemented and wired.,2026-02-20T12:00
src/pipeline/runOrchestrator.js (events),full,yes,,S2-convergence,COMPLETE — Convergence round events: convergence_round_started; convergence_round_completed; convergence_stop emitted via optional logger. 3 event tests pass. NeedSet size; confidence delta; stop reason all logged per round.,Sprint 2 Item 9 — Round summary events added to convergence loop.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-07-tier-retrieval-prime-sources.md,full,yes,,S3-retrieval,COMPLETE — Per-field tier_preference E2E confirmed. Fixed buildTierWeightLookup to use position-based weight assignment so preferred tiers actually outrank defaults. 3 TDD tests in phase07PrimeSourcesBuilder.test.js; 0 regressions.,Sprint 3 Item 18 — TDD confirmation completed. buildTierWeightLookup now uses maxDefaultWeight position base for preferred tiers.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-08-extraction-context-wiring.md,full,yes,,S3-retrieval,COMPLETE — Lane-level tracing hardened. emitTrace in openaiClient.js confirmed: developer_mode=true writes full prompt/response; developer_mode=false writes redacted with char counts; error path writes error details. 3 TDD tests in llmTraceWriter.test.js; 0 regressions.,Sprint 3 Item 19 — Lane tracing TDD confirmation completed.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-07-tier-retrieval-prime-sources.md,full,yes,,S3-retrieval,COMPLETE — Hard identity filter implemented. filterByIdentityGate export in tierAwareRetriever.js. source_identity_match/source_identity_score propagated through evidence pool. identityFilterEnabled flag gates critical/identity fields. 5 TDD tests in retrievalIdentityFilter.test.js; 0 regressions.,Sprint 3 Item 20 — Identity filter + pool propagation implemented and wired.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-07-tier-retrieval-prime-sources.md,full,yes,,S3-retrieval,COMPLETE — Retrieval trace objects implemented. traceEnabled flag on buildTierAwareFieldRetrieval returns trace with pool_size; scored_count; accepted/rejected counts; rejected_hits (capped at 20); filter_stats. 4 TDD tests in retrievalTrace.test.js; 0 regressions.,Sprint 3 Item 21 — Retrieval traces implemented with rejection reasons and cap.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-07-tier-retrieval-prime-sources.md,full,yes,,S3-retrieval,COMPLETE — Miss diagnostics implemented. miss_diagnostics object on every field with status (satisfied/partial/miss); reasons (pool_empty/no_anchor/tier_deficit/identity_mismatch); and counters (pool_rows_scanned; anchor_match_count; preferred_tier_hit_count; identity_filtered_count; min_refs_gap). 5 TDD tests in retrievalMissDiagnostics.test.js; 0 regressions.,Sprint 3 Item 22 — Miss diagnostics with reason codes and counters.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-03-provider-search-triage.md,full,yes,,S3-retrieval,COMPLETE — SERP applicability fields added. 3 pure functions exported from searchDiscovery.js: computeIdentityMatchLevel (strong/partial/weak/none); detectVariantGuardHit; detectMultiModelHint. classifyUrlCandidate extended with identity_match_level; variant_guard_hit; multi_model_hint. 5 TDD tests in serpApplicability.test.js; 0 regressions.,Sprint 3 Item 23 — SERP applicability pure functions + classification extension.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-02-searchprofile-alias-planning.md,full,yes,,S3-retrieval,COMPLETE — SearchProfile upgraded. LLM schema accepts both string[] and Array<{query; target_fields}> via anyOf. normalizeQueryRows export coerces both formats. planDiscoveryQueriesLLM returns structured rows. searchDiscovery carries target_fields through queryCandidates. buildNeedSetDispatch uses target_fields in dispatch. 6 tests in discoveryPlanner.test.js + 1 in convergenceLoop.test.js; 0 regressions.,Sprint 3 Item 24 — Structured SearchProfile with backward-compatible schema.,2026-02-20T12:00
src/config.js + src/pipeline/runOrchestrator.js,full,yes,,S4A-convergence-tuning,COMPLETE: All convergence knobs in config.js with GUI-tunable GET/PUT /api/v1/convergence-settings endpoint (with validation). resolveMethodWeight() and resolveTierWeight() in consensusEngine.js read config knobs. LLM weight test at consensusEngine.test.js:774. Tier weight config test added Sprint 5B. 25 consensus tests pass.,Sprint 4A Item 25 — Convergence knobs wired to config + API + scoring. Test for consensusTier*Weight added 2026-02-21.,2026-02-21T13:00
src/pipeline/runOrchestrator.js (queryDedup),full,yes,,S4A-convergence-tuning,COMPLETE: allTimeQueries Set in runConvergenceLoop (line 288) tracks all queries across rounds. Dedup filter at lines 347-356. queries_deduped_count logged in convergence_round_started event. Tests 20-22 in convergenceLoop.test.js verify dedup behavior.,Sprint 4A Item 26 — Cross-round query deduplication fully implemented and tested.,2026-02-21T13:00
src/pipeline/summaryContract.js,full,yes,,S4A-convergence-tuning,"COMPLETE: Zod schema in summaryContract.js validates missing_required_fields, critical_fields_below_pass_target, confidence, validated, sources_identity_matched, provenance, fieldRules, fieldOrder, fieldReasoning, constraint_analysis, identityContext. Called at runOrchestrator.js line 389. Logs warnings on shape violations without throwing. Test suite in summaryContract.test.js.",Sprint 4A Item 27 — Summary contract schema enforced at convergence boundary.,2026-02-21T13:00
src/utils/tierHelpers.js,full,yes,,S4A-convergence-tuning,"COMPLETE: toTierNumber(), parseTierPreferenceFromRule(), parseTierPreferenceFromNeedRow() exported. Imported by needsetEngine.js and tierAwareRetriever.js. No inline duplicates remain. Full test suite in tierHelpers.test.js.",Sprint 4A Item 28 — Shared tier helpers extracted and wired. No duplicates.,2026-02-21T13:00
src/discovery/brandResolver.js,full,yes,,S4B-llm-discovery,"COMPLETE: resolveBrandDomain() with SQLite brand_domains cache + LLM fallback. Returns officialDomain/aliases/supportDomain/confidence. Imported by searchDiscovery.js (line 902). 5 tests (cache hit, LLM fallback, integration with selectManufacturerHosts).",Sprint 4B Item 29 — Fully implemented and wired. Verified 2026-02-21.,2026-02-21T14:00
src/discovery/domainSafetyGate.js,full,yes,,S4B-llm-discovery,"COMPLETE: classifyDomains() with SQLite domain_classifications cache + batch LLM classification (30/call). adult_content/malware → safe=false. Imported by searchDiscovery.js (line 1538). 3 tests (cache hit, LLM classify, block logic).",Sprint 4B Item 30 — Fully implemented and wired. Verified 2026-02-21.,2026-02-21T14:00
src/discovery/serpTriage (distributed),full,yes,,S4B-llm-discovery,COMPLETE: Implemented as serpDedupe.js (dedup) + serpReranker.js (LLM rerank with tier scoring + domain safety integration) + resultReranker.js (deterministic). All wired in searchDiscovery.js (lines 1334-1602). Tests in phase03SerpTriage.test.js (460 lines).,Sprint 4B Item 31 — Distributed across 3 modules. Fully implemented and wired. Verified 2026-02-21.,2026-02-21T14:00
src/db/specDb.js + src/db/seed.js (sourceStrategy),full,yes,,S4B-llm-discovery,"COMPLETE: source_strategy SQLite table with full schema (host, display_name, source_type, default_tier, discovery_method, search_pattern, priority, enabled, category_scope). CRUD methods: list/listEnabled/get/upsert/update/delete. Used by searchDiscovery.js (line 1290) for URL prediction source selection.",Sprint 4B Item 32 — Table + CRUD + production wiring. Verified 2026-02-21.,2026-02-21T14:00
src/discovery/urlPredictor.js,full,yes,,S4B-llm-discovery,"COMPLETE: predictSourceUrls() with LLM prediction + HEAD validation. Returns url/source_host/predicted_tier/confidence. Imported by searchDiscovery.js (line 1296). Predicted URLs injected into SERP results. 4 tests (predict, HEAD filter, fallback, schema).",Sprint 4B Item 33 — Fully implemented and wired. Verified 2026-02-21.,2026-02-21T14:00
src/discovery/escalationPlanner.js,full,yes,,S4B-llm-discovery,"COMPLETE: planEscalationQueries() with LLM surgical re-query generation. Returns query/target_fields/expected_source_type. Imported by runOrchestrator.js (line 325). Escalation queries merged into dispatch + deduped against allTimeQueries. 3 tests (escalation, schema, fallback).",Sprint 4B Item 34 — Fully implemented and wired into convergence loop. Verified 2026-02-21.,2026-02-21T14:00
implementation/ai-indexing-plans/PHASE-06A-evidence-index-database.md,full,yes,,S5-evidence,COMPLETE — Evidence index database TDD: failing tests for document insert; chunk insert; FTS query; snippet_id generation; dedupe hit detection; applicability metadata storage. 12 tests in evidenceIndexDb.test.js.,Sprint 5 Item 35 — TDD tests for EvidenceIndexDb.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-06A-evidence-index-database.md,full,yes,,S5-evidence,COMPLETE — Implemented src/index/evidenceIndexDb.js with SQLite lifecycle; documents table; chunks table; facts table; write APIs. Core schema and row persistence.,Sprint 5 Item 36 — EvidenceIndexDb core schema + write + read.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-06A-evidence-index-database.md,full,yes,,S5-evidence,COMPLETE — FTS5 virtual table over chunks and facts with ranked query API. Full-text search over field anchors and value patterns replaces LIKE fallback.,Sprint 5 Item 37 — FTS5 implementation.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-06A-evidence-index-database.md,full,yes,,S5-evidence,COMPLETE — Stable snippet_id generation anchored to content_hash + parser version + chunker version. Deterministic IDs that survive re-runs on unchanged content.,Sprint 5 Item 38 — Stable snippet_id generation.,2026-02-20T12:00
src/scoring/consensusEngine.js (config wiring),full,yes,,S5-evidence,COMPLETE — Consensus config knobs wired for tier-weight and method-weight scoring.,Sprint 5 Item 40 — Consensus config wiring.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-08-extraction-context-wiring.md,full,yes,,S5-evidence,COMPLETE — Provider-normalized structured output parser handles non-JSON wrappers (markdown code fences; reasoning prefix/suffix text) consistently across all LLM providers.,Sprint 5 Item 41 — Structured output parser.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-01-needset-engine-field-state.md,full,yes,,S5-evidence,COMPLETE — Evidence freshness decay: computeEvidenceDecay() with exponential half-life (2^(-ageDays/decayDays)) in needsetEngine.js. Config knobs needsetEvidenceDecayDays (default 14) and needsetEvidenceDecayFloor (default 0.30). 11 tests in evidenceFreshnessDecay.test.js; 0 regressions.,Sprint 5 Item 49 — TDD implementation completed.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-06A-evidence-index-database.md,full,yes,,S5-evidence,COMPLETE — Dedupe outcome events: indexDocument() return captured in runProduct.js; evidence_index_result event emitted via logger. runtimeBridge.js handler maps dedupe_outcome. Pure function buildDedupeOutcomeEvent + dedupeOutcomeToEventKey. 7 tests in dedupeOutcomeEvents.test.js; 0 regressions.,Sprint 5 Item 50 — TDD implementation completed.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-09-convergence-loop-stop-conditions.md,full,yes,,S5-evidence,COMPLETE — Phase 09 GUI proof: (63A) buildRoundSummaryFromEvents pure function in src/api/roundSummary.js. GET /api/v1/indexlab/run/:runId/rounds REST endpoint. Handles both multi-round convergence events and single-pass run fallback. runtimeBridge.js handlers for convergence events. 7 tests. (63B) Phase 09 panel in IndexingPage.tsx with round table; stop reason badge; confidence bars; NeedSet deltas. TypeScript + Vite build clean.,Sprint 5 Items 63A+63B — Backend endpoint + GUI panel implemented.,2026-02-20T12:00
implementation/ai-indexing-plans/PHASE-06A-evidence-index-database.md,full,yes,,S5-evidence,COMPLETE — Evidence index GUI enhancement: buildEvidenceSearchPayload pure function in src/api/evidenceSearch.js. Evidence index endpoint enhanced with dedupe_stream stats from NDJSON events. Phase 06A GUI panel enhanced with 5 live dedupe stream cards. 5 tests in evidenceSearchEndpoint.test.js; 0 regressions.,Sprint 5 Item 65 — Evidence search payload + GUI enhancement completed.,2026-02-20T12:00
src/api/roundSummary.js,verified_not_bug,yes,,S5B-bugfix,VERIFIED NOT A BUG: unwrapPayload() correctly handles both flat and payload-nested events. Tests at roundSummaryEndpoint.test.js:87-114 confirm both formats. 9 tests pass.,Audit finding (2026-02-20): Originally HIGH severity. Verified 2026-02-21: not a real bug — unwrapPayload handles both formats.,2026-02-21T11:00
src/api/guiServer.js (dedupe filter),verified_not_bug,yes,,S5B-bugfix,VERIFIED NOT A BUG: runtimeBridge writes transformed event names (indexed_new/dedupe_hit/dedupe_updated) to NDJSON. guiServer filter matches these correctly. Event flow verified by reading both runtimeBridge.js and guiServer.js.,Audit finding (2026-02-20): Originally HIGH severity. Verified 2026-02-21: not a real bug — runtimeBridge transforms before NDJSON write; filter matches transformed names.,2026-02-21T11:00
src/pipeline/dedupeOutcomeEvent.js,full,yes,,S5B-bugfix,COMPLETE: buildDedupeOutcomeEvent now imported by runProduct.js (replaces inline code at line 3045-3053). Parity test confirms identical output. runtimeBridge.js already imports dedupeOutcomeToEventKey. 8 tests pass.,Sprint 5B (2026-02-21): Wired module into runProduct.js. Inline duplication eliminated.,2026-02-21T11:00
src/api/guiServer.js (convergence validation),verified_not_bug,yes,,S5B-bugfix,"VERIFIED ALREADY DONE: PUT handler at lines 7963-7981 already has INT_KEYS (parseInt+isFinite+Math.max(0)), FLOAT_KEYS (parseFloat+clamp 0-1), BOOL_KEYS (strict coercion), unknown keys skipped, invalid values rejected with reason code.",Audit finding (2026-02-20): Originally HIGH severity. Verified 2026-02-21: validation already implemented.,2026-02-21T12:00
src/pipeline/runProduct.js (catch block),verified_not_bug,yes,,S5B-bugfix,VERIFIED ALREADY DONE: Line 3055 already has catch (err) with String(err?.message || err || 'unknown') logged in evidence_index_write_failed event. No bare catch blocks exist in runProduct.js.,Audit finding (2026-02-20): Originally MEDIUM severity. Verified 2026-02-21: error logging already present.,2026-02-21T12:00
test/roundSummaryEndpoint.test.js + test/evidenceFreshnessDecay.test.js + test/evidenceSearchEndpoint.test.js,full,yes,,S5B-bugfix,"COMPLETE: (1) roundSummaryEndpoint already tests both flat and wrapped formats (lines 87-116). (2) evidenceFreshnessDecay.test.js line 140 already uses assert.strictEqual(sensorNeed, undefined). (3) Added text truncation boundary test (500 chars) and unknown dedupe outcome test to evidenceSearchEndpoint.test.js. (4) Shared objects verified not mutated by computeNeedSet (pure function). 9 evidence search tests pass.",Sprint 5B (2026-02-21): Sub-items 1-2 verified already fixed. Sub-items 3-4: 2 new boundary tests added; mutation verified impossible.,2026-02-21T12:00
implementation/ai-indexing-plans/PHASE-09-convergence-loop-stop-conditions.md,full,yes,,S5B-convergence-wire,"COMPLETE: runConvergenceLoop wired into commandIndexLab via --convergence flag (opt-in, default off). bridgeAsLogger adapter converts runtimeBridge to convergence logger. Data bridge fixed: provenance read from roundResult top-level (not summary), field_reasoning read as snake_case. final_result exposed in loop return for CLI compatibility. 26 convergence tests pass (3 new: data bridge, final_result, bridgeAsLogger). Acceptance test (Item 64b) pending manual run.",Sprint 5B (2026-02-21): Convergence loop wired to production CLI. #1 accuracy blocker resolved.,2026-02-21T12:00
src/pipeline/automationQueue.js,full,yes,,S6-decompose-learn,COMPLETE: AutomationQueue class with SQLite tables (automation_jobs + automation_actions). State machine: queued→running→done/failed. Dedupe by dedupe_key. Query by status/jobType. 8 tests in automationQueue.test.js. Worker loop + TTL policy deferred to Sprint 7.,Sprint 6 Step 10 — Durable queue foundations implemented. Worker loop deferred.,2026-02-21T16:00
src/pipeline/consensusPhase.js,full,yes,,S6-decompose-learn,COMPLETE: executeConsensusPhase() extracts runConsensusEngine + applySelectionPolicyReducers + applyListUnionReducers from runProduct.js. Characterization tests written before extraction. 5 tests in consensusPhase.test.js. Wired into runProduct.js replacing inline consensus block.,Sprint 6 Step 2 — TDD extraction completed. 0 regressions.,2026-02-21T14:00
src/pipeline/learningExportPhase.js,full,yes,,S6-decompose-learn,COMPLETE: runLearningExportPhase() with dependency injection pattern (all functions passed as parameters). Extracts persist learning → export artifacts → write finals → write review → cleanup. 5 tests in learningExportPhase.test.js. Wired into runProduct.js.,Sprint 6 Step 3 — TDD extraction completed. 0 regressions.,2026-02-21T14:30
src/pipeline/runProduct.js (helper audit),full,yes,,S6-decompose-learn,COMPLETE: 6 helper groups extracted to src/pipeline/helpers/: cryptoHelpers.js (5 functions); urlHelpers.js (8 functions); provenanceHelpers.js (5 functions); candidateHelpers.js (8 functions); evidenceHelpers.js (6 functions); reasoningHelpers.js (3 functions). 59 tests across 6 test files. runProduct.js reduced from 5079 to 4280 lines (-799 lines; -15.7%).,Sprint 6 Step 4 — 6 helper groups extracted with TDD. Target was <3000; reached 4280. Remaining helpers need Groups 7-10 in Sprint 7.,2026-02-21T15:00
src/learning/learningUpdater.js (TDD),full,yes,,S6-decompose-learn,COMPLETE: 9 failing tests written first for evaluateLearningGate: reject confidence below threshold; reject refs insufficient; reject field not accepted; reject tier criteria not met; reject component not accepted; accept when all gates pass; custom threshold override; default minRefs; null safety. All RED before implementation.,Sprint 6 Step 6 — TDD tests written first. All 9 tests RED.,2026-02-21T15:30
src/learning/learningUpdater.js,full,yes,,S6-decompose-learn,COMPLETE: evaluateLearningGate() with 5 acceptance gates: confidence >= 0.85 (configurable); refsFound >= minRefs (default 2); fieldStatus === 'accepted'; at least one Tier 1/2 in tierHistory; componentReviewStatus === 'accepted' when componentRef present. Returns { accepted; reason }. 9 tests pass.,Sprint 6 Step 7 — Implementation makes all 9 gate tests green.,2026-02-21T15:30
src/learning/learningStores.js,full,yes,,S6-decompose-learn,COMPLETE: 4 store classes: ComponentLexiconStore (90-day decay; 180-day expire); FieldAnchorsStore (60-day decay); UrlMemoryStore (upsert increments used_count; 120-day decay); DomainFieldYieldStore (seen/used tracking; yield_ratio; getLowYieldDomains). All SQLite-backed. 8 tests in learningStores.test.js.,Sprint 6 Step 8 — Four learning stores with decay/expiration implemented.,2026-02-21T15:45
src/learning/learningSuggestionEmitter.js,full,yes,,S6-decompose-learn,COMPLETE: 3 export functions: buildSearchHints; buildAnchorsSuggestions; buildKnownValuesSuggestions. Each maps accepted updates to standard shape { field; value; evidence_refs; acceptance_stats; source_run_id }. No mutation to compiled rules. 5 tests in learningSuggestions.test.js.,Sprint 6 Step 9 — Studio suggestion artifacts implemented. Rollback-safe: propose only.,2026-02-21T16:00
src/indexlab/runtimeBridge.js,full,yes,,S6-decompose-learn,COMPLETE: Event audit found 2 gaps: (1) visual_asset_captured — no handler; (2) run_completed — handled but not emitted as event. Both fixed. visual_asset_captured handler emits to 'fetch' stage with url/screenshot_uri/quality_score/dimensions. run_completed now emits to 'runtime' stage with identity/counters. 4 tests in runtimeBridgeEventAudit.test.js.,Sprint 6 Step 11 Item 26 — Event audit completed. 2 gaps fixed; 4 characterization tests.,2026-02-21T16:30
src/pipeline/runOrchestrator.js (keyMigration),full,yes,,S6-decompose-learn,COMPLETE: validateAndMigrateKeys() pure function in runOrchestrator.js. Accepts data/migrationMap/knownKeys. Returns { migrated; unknown; migratedKeys }. Old keys mapped to new; known keys passed through; unknown keys flagged. 7 tests in convergenceKeyMigration.test.js. Full convergence wiring deferred to Sprint 7.,Sprint 6 Step 11 Item 27 — Key migration foundation implemented. Full wiring deferred.,2026-02-21T16:30
src/scoring/consensusEngine.js,full,yes,,S6-decompose-learn,COMPLETE: 3 verification tests added to consensusEngine.test.js: (1) Tier-1 LLM (0.6) beats Tier-3 deterministic on conflict; (2) Tier-3 LLM (0.2) loses to Tier-1 deterministic; (3) custom consensusTier4Weight overrides implicit 0.4 fallback. All 3 pass — knobs already wired from Sprint 4A.,Sprint 6 Step 5 — Config knob verification tests confirm Sprint 4A wiring is correct.,2026-02-21T15:15
src/validator/identityGate.js (tiered threshold),full,yes,,Order29-Step1,COMPLETE: Removed Math.max(certainty 0.99) override → Math.max(certainty 0.95). identityGatePublishThreshold=0.70 config knob added. certainty_below_publish_threshold check uses 0.70 not 0.99. 5 TDD tests pass.,Order 29 Step 1 — Tiered identity gate threshold. Old 0.99 was mathematically unreachable for real products.,2026-02-22T10:00
src/validator/identityGate.js (contradiction relaxation),full,yes,,Order29-Step2,COMPLETE: 4 relaxations — connectionClassesCompatible() fuzzy match (wireless vs wireless/wired no longer conflicts); sensorTokenOverlap() with 0.6 overlap threshold; dimensionConflict() tolerance >1mm→>3mm; skuTokenOverlap() regional variants no longer conflict. buildIdentityCriticalContradictions exported. 6 TDD tests pass.,Order 29 Step 2 — Cross-source contradiction detection was triggering false positives on real products.,2026-02-22T10:00
src/pipeline/runOrchestrator.js (identity fast-fail),full,yes,,Order29-Step3,COMPLETE: evaluateStopConditions() gains identityStuckRounds + identityFailFastRounds params. identity_gate_stuck stop condition fires after 1 stuck round (default). runConvergenceLoop tracks identity certainty improvement per round; resets counter on 0.05+ improvement. convergenceIdentityFailFastRounds=1 config knob. 4 TDD tests pass.,Order 29 Step 3 — Convergence loop wasted 75-150 min per identity-stuck product. Now fails fast after 1 round.,2026-02-22T10:00
src/config.js (performance tuning),full,yes,,Order29-Step4,COMPLETE: Standard profile defaults tuned — perHostMinDelayMs 900→300; pageGotoTimeoutMs 30000→15000; pageNetworkIdleTimeoutMs 6000→2000; discoveryMaxQueries 8→6; discoveryMaxDiscovered 120→80; convergenceMaxRounds 5→3; convergenceMaxLowQualityRounds 3→1; convergenceNoProgressLimit 3→2. ~75% fetch time reduction estimated. 1 TDD test.,Order 29 Step 4 — Standard profile timeouts were 3-10x too slow for real-world runs.,2026-02-22T10:00
src/pipeline/runProduct.js (soft identity gate),full,yes,,Order29-Step5,COMPLETE: Replaced binary abort (validated && confidence >= 0.99) with 3-tier system — Full (>=0.70): normal extraction; Provisional (0.50-0.70): extraction runs with identity_provisional tag; Abort (<0.50): all fields=unk. deriveNeedSetIdentityState thresholds aligned (locked=0.95 provisional=0.70). publishable check uses identityPublishThreshold. 3 TDD tests pass.,Order 29 Step 5 — Zero extraction ever ran because the binary gate blocked everything. Now extraction proceeds in provisional band.,2026-02-22T10:30
src/validator/qualityGate.js (threshold fix),full,yes,,Order29-Step6,COMPLETE: identity_confidence_ok threshold fixed 0.99→0.70. Aligns with tiered identity gate system.,Order 29 Step 6 audit — Hardcoded 0.99 in qualityGate.js contradicted the new tiered system.,2026-02-22T10:30
src/indexlab/needsetEngine.js (threshold fix),full,yes,,Order29-Step6,COMPLETE: normalizeIdentityState() thresholds aligned — locked 0.99→0.95; provisional 0.9→0.70. Consistent with deriveNeedSetIdentityState in runProduct.js.,Order 29 Step 6 audit — needsetEngine used stale 0.99/0.9 thresholds creating divergent identity state classification.,2026-02-22T10:30
tools/run-benchmark.mjs,full,yes,,Order29-Step7,COMPLETE: 15-mouse × 3-run benchmark harness. Per-run metrics (wall clock; identity certainty; fields extracted; sources; confidence). Aggregate stats (mean/median/p95). JSON + Markdown output. --profile and --product flags.,Order 29 Step 7 — Benchmark harness for validating identity gate fix + performance tuning.,2026-02-22T11:00
implementation/ai-indexing-plans/PHASE-05-parallel-fetch-parse.md,full,yes,1,S7-track-b,"COMPLETE: Bounded concurrent fetch scheduler in src/concurrency/ — HostPacer (per-host delay enforcement); FallbackPolicy (error-type-to-action mapping; 10 outcome keys); FetchScheduler (WorkerPool + HostPacer composition; drainQueue with concurrency/perHostDelay/maxRetries). Feature-flagged via FETCH_SCHEDULER_ENABLED (default false). Config knobs: fetchSchedulerEnabled; fetchSchedulerMaxRetries; fetchSchedulerFallbackWaitMs. Wired into runProduct.js with conditional path. 6 event types emitted. GUI Scheduler & Fallback panel in Phase 05 tab. 84 new tests (hostPacer 12; fallbackPolicy 25; fetchScheduler 24; config 3; integration 10; dynamicCrawlerFallback 6; runtimeBridge 3). 2323 total tests pass.",Sprint 7 Track B Items 53+54 — TDD implementation completed. 10-step plan fully executed.,2026-02-22T18:00
implementation/ai-indexing-plans/PHASE-05-parallel-fetch-parse.md,full,yes,2,S7-track-b,"COMPLETE: Dual-source resilience — classifyFetchError() in dynamicCrawlerService.js replaces isNoResultError() as sole fallback trigger. 403/timeout/5xx/network errors now trigger fetcher mode fallback (crawlee→playwright→http). 429 preserved as rate_limited (no mode switch). FallbackPolicy pure functions: classifyFallbackAction(); resolveFallbackModes(); buildFallbackDecision(). Scheduler integrates fallback with per-URL retry envelope and exhaustion tracking. Telemetry includes degraded_from_mode and degraded_reason. RuntimeBridge handles scheduler_fallback_started/succeeded/exhausted events.",Sprint 7 Track B Items 53+54 — Dual-source resilience implemented as part of scheduler + DynamicCrawlerService enhancement.,2026-02-22T18:00
src/pipeline/helpers/ (Groups 7-10),partial,no,3,S7-track-b,"Continue runProduct.js decomposition — extract identity helpers, runtime helpers, scoring helpers, and type helpers to src/pipeline/helpers/. Target <3000 LOC (currently 4280). Groups 1-6 extracted in Sprint 6 with 59 tests.",Sprint 6 reduced from 5079→4280. Groups 7-10 are the remaining extraction targets for monolith decomposition.,
implementation/ai-indexing-plans/PHASE-11-workers-runtime-control.md,partial,no,4,S7-track-b,"PHASE 11 — TDD: Write failing tests for worker pool sizing — test that WORKERS_SEARCH, WORKERS_FETCH, WORKERS_PARSE, WORKERS_LLM config values are respected by pool constructors and that per-host backoff still applies under all pool sizes. Depends on item 1 (multi-pool scheduler).",Audit (2026-02-22): Phase 11 at 15%. WorkerPool class (81 lines) with named concurrency pools + queue + drain + stats exists (9 tests in workerPool.test.js). BudgetEnforcer (131 lines) tracks per-product resource usage. AsyncDeepJobQueue (142 lines) handles async deep tasks. Sizing-specific TDD tests not yet written.,
implementation/ai-indexing-plans/PHASE-11-workers-runtime-control.md,partial,no,5,S7-track-b,"PHASE 11: Implement configurable worker counts per pool in src/config.js and wire into Phase 05 pool constructors — WORKERS_SEARCH, WORKERS_FETCH, WORKERS_PARSE, WORKERS_LLM with sane defaults. Depends on item 4 (TDD).",Audit (2026-02-22): WorkerPool constructor already accepts poolName + concurrency params. Config wiring (WORKERS_* env vars) and pool constructor integration are the remaining work.,
implementation/ai-indexing-plans/PHASE-11-workers-runtime-control.md,not_implemented,no,6,S7-track-b,"PHASE 11: Add Workers GUI panel — current settings, active and queued per pool, requests/min, 429/blocked rate — with one-click safe drain and live knob adjustment for next run. Depends on item 5 (worker counts).",Audit (2026-02-22): WorkerPool.stats() already returns { active; queued; completed; failed } per pool. GUI panel needs REST endpoint + IndexingPage.tsx panel. No GUI code exists for this.,
implementation/ai-indexing-plans/PHASE-12-multi-product-batch-automation.md,not_implemented,no,7,S7-track-b,"PHASE 12 — TDD: Write failing tests for batch queue state machine — test queued/running/completed/failed/skipped/stopped transitions, test resume after simulated restart, test that completed items are never re-run without explicit override. Depends on item 5 (Phase 11 worker controls).",Audit (2026-02-22): Phase 12 at 0%. AutomationQueue (Sprint 6) provides SQLite + state machine foundation that batch can extend. Batch-specific state machine TDD must be written before build.,
implementation/ai-indexing-plans/PHASE-12-multi-product-batch-automation.md,not_implemented,no,8,S7-track-b,"PHASE 12: Implement batch queue state machine (queued/running/completed/failed/skipped/stopped) with durable SQLite-backed persistence, dedupe_key per item, attempt counters, and resumable progress across restarts. Depends on item 7 (TDD).",Audit (2026-02-22): AutomationQueue already has SQLite persistence + dedupe_key + state machine (queued/running/done/failed). Batch queue needs additional states (skipped/stopped) + attempt counters + resume logic on top of this foundation.,
implementation/ai-indexing-plans/PHASE-12-multi-product-batch-automation.md,not_implemented,no,9,S7-track-b,"PHASE 12: Implement batch lifecycle APIs — POST /api/v1/indexlab/batch/plan, /start, /pause, /resume, /stop, force-stop and GET /batch/:batchRunId/status, /items — all returning stable IDs and timestamps for replayability. Depends on item 8 (state machine).",REST control plane is required before any GUI controls can be wired. All endpoints must return stable IDs for audit trail.,
implementation/ai-indexing-plans/PHASE-12-multi-product-batch-automation.md,not_implemented,no,10,S7-track-b,"PHASE 12: Implement Batch Run Builder GUI — vertical+horizontal scrolling product grid with checkbox bulk actions, Select All/Clear/Select Brand/Invert/search-filter toolbar, and brand priority controls. Depends on item 9 (batch APIs).",Operator UX for large multi-product runs requires fast selection and explicit brand ordering.,
implementation/ai-indexing-plans/PHASE-12-multi-product-batch-automation.md,not_implemented,no,11,S7-track-b,"PHASE 12: Add Batch Run Summary panel with live state counters (queued/running/completed/failed), throughput in products/hour, ETA estimate, current product and phase cursor, and top recent failures with short reason. Depends on item 8 (state machine).",Long-task observability proves batch execution is proceeding correctly.,
implementation/ai-indexing-plans/PHASE-10-learning-compounding.md,partial,no,12,S7-track-a,"PHASE 10: Two-product learning proof — run product A then B, verify B uses fewer searches via learned anchors/values. GUI skeleton exists (Panel 13). learningUpdater + 4 stores + suggestion emitter all implemented. Pipeline wiring + proof pending. Can start immediately — no dependencies.",Audit (2026-02-22): Phase 10 at 70%. learningUpdater (9 tests); learningStores (4 stores with decay; 8 tests); learningSuggestionEmitter (3 exports; 5 tests); learningGatePhase (404-line test suite); learningExportPhase (5 tests); GUI Panel 13 skeleton. Missing: pipeline wiring into runProduct.js + two-product proof.,
src/retrieve/tierAwareRetriever.js (FTS wiring),partial,no,13,S7-track-a,PHASE 07: Replace provenance fallback pool with FTS queries from Phase 06A evidence index in tierAwareRetriever.js. Currently uses brute-force pool scan. FTS5 is built and tested (Sprint 5). Wiring will eliminate evidence_pool_fallback_used=true.,Audit (2026-02-22): Phase 07 retrieval at 100% functionally — tier preference (3 tests); identity filter (5 tests); retrieval traces (4 tests); miss diagnostics (5 tests); primeSourcesBuilder (8 tests). Uses brute-force provenance pool. FTS5 is fully built in Phase 06A (12 tests). Wiring replaces pool scan with FTS query.,
implementation/ai-indexing-plans/PHASE-06B-refetch-scheduler-continuous-repair.md,partial,no,14,S7-track-a,PHASE 06B: Implement worker loop to consume automation queue jobs + per-domain TTL staleness refresh policy. Wire content_hash unchanged path to skip reparse. Add scheduler audit feed. AutomationQueue foundations exist (Sprint 6). Depends on Phase 06B queue (done).,Audit (2026-02-22): Phase 06B at 60%. AutomationQueue (8 tests) has SQLite tables + state machine + dedupe_key + query by status/jobType. Missing: worker loop to poll/execute jobs + per-domain TTL table + content_hash skip-reparse + audit feed.,
implementation/ai-indexing-plans/PHASE-04-url-health-self-healing.md,partial,no,,deferred,PHASE 04: Close repair-to-Phase 06B handoff — verify repair_query_enqueued signals are consumed by Phase 06B queue state machine with correct dedupe_key and field_targets; add end-to-end test proving the chain,Phase 04 emits repair signals but Phase 06B scheduler consumption is not proven end-to-end. Deferred — convergence loop handles URL failures via retry rounds.,
implementation/ai-indexing-plans/PHASE-04-url-health-self-healing.md,partial,no,,deferred,"PHASE 04: Harden domain checklist API — verify all Phase 04 fields (repair_queries, bad_url_patterns, host_budget_score, cooldown_seconds_remaining) are populated from live run data, not placeholders, for every run",Domain checklist is the health dashboard for the URL layer. Deferred — dashboard polish not blocking accuracy.,
implementation/ai-indexing-plans/PHASE-03-provider-search-triage.md,partial,no,,deferred,"PHASE 03: Add deterministic triage score decomposition per candidate — emit tier bonus, doc_kind alignment bonus, identity bonus, and penalty breakdown so every URL accept/reject decision is fully explainable in the GUI",Score decomposition makes the system auditable. Deferred — auditability improvement not blocking accuracy.,
implementation/ai-indexing-plans/PHASE-01-needset-engine-field-state.md,partial,no,,deferred,"PHASE 01: Implement row-level snippet timestamp lineage in NeedSet table — surface capture timestamp per evidence row in GUI NeedSet panel, enable sort by evidence age",Timestamp lineage enables decay decisions. Deferred — freshness decay (Item 49) is the actionable item; GUI lineage is polish.,
implementation/ai-indexing-plans/PHASE-11-workers-runtime-control.md,not_implemented,no,,deferred,"PHASE 11: Implement cross-phase knob governance — src/field-rules/capabilities.json as single source of knob truth, CI check that every status=live knob has at least one runtime consumer test, per-run knob-usage telemetry emitted as a run event",Governance prevents dead knobs from accumulating silently. Deferred — useful but not blocking accuracy or throughput.,
implementation/ai-indexing-plans/PHASE-08B-visual-asset-capture-proof.md,partial,no,,deferred,"PHASE 08B: Implement src/extract/visualAssetCapture.js with target-first image discovery ladder, manifest generation, and sharp-based LLM derivative generation",Audit (2026-02-22): Phase 08B at 25%. ScreenshotQueue class exists in src/extract/screenshotCapture.js with config knobs (format/quality/selectors) + Playwright capture. 8 tests pass. visual_asset_captured event wired in runtimeBridge. Missing: target-first discovery ladder + manifest + sharp derivatives. Deferred.,
implementation/ai-indexing-plans/PHASE-08B-visual-asset-capture-proof.md,partial,no,,deferred,PHASE 08B: Implement visual quality gate and multi-product target-match gate — only quality-passed and target-matched derivatives are eligible for extraction context,Audit (2026-02-22): ScreenshotQueue captures images but no quality gate or target-match gate exists. Deferred — trash image rejection matters for cost but not for accuracy when text evidence is mandatory.,
implementation/ai-indexing-plans/PHASE-08B-visual-asset-capture-proof.md,partial,no,,deferred,PHASE 08B: Wire image_asset_refs into Phase 08 extraction context for ambiguous fields — include visual evidence only when ambiguity level is medium or higher,Deferred — visual evidence is supplementary. Text evidence is the primary accuracy mechanism.,
implementation/ai-indexing-plans/PHASE-08B-visual-asset-capture-proof.md,partial,no,,deferred,"PHASE 08B: Add Visual Assets GUI panel with live thumbnail strip, preview modal, per-asset download action, quality gate badge, target-match badge",Deferred — GUI polish for visual assets. Not blocking accuracy.,
implementation/ai-indexing-plans/parsing-managament/07-scanned-pdf-ocr.md,partial,no,,deferred,"PARSING 07: Implement OCR preprocess pass — deskew, denoise, binarize — before Tesseract/PaddleOCR runs; add fixture accuracy suite",Baseline OCR is implemented. Preprocessing affects <5% of evidence surfaces for gaming peripherals.,
implementation/ai-indexing-plans/parsing-managament/07-scanned-pdf-ocr.md,partial,no,,deferred,PARSING 07: Add GUI fallback-rate proof for PaddleOCR vs Tesseract,Backend selection path exists but is not proven in GUI. Deferred — operator visibility not blocking accuracy.,
implementation/ai-indexing-plans/parsing-managament/11-visual-asset-capture.md,partial,no,,deferred,"PARSING 11: Implement dedicated Phase 11 visual capture control-plane — per-source capture policy, max-per-source config, capture lifecycle events",Screenshot capture is wired. Full control-plane is optimization. Deferred.,
implementation/ai-indexing-plans/parsing-managament/08-image-ocr-extraction.md,not_implemented,no,,deferred,"PARSING 08: Implement image OCR worker pipeline — consume Phase 08B/11 visual assets, run OCR per image region",No image OCR pipeline exists. Deferred — depends on Phase 08B visual assets which are also deferred.,
implementation/ai-indexing-plans/parsing-managament/09-chart-graph-extraction.md,partial,no,,deferred,"PARSING 09: Implement full ordered chart extraction stack — network payload intercept first, config object parsing second, SVG data extraction third, vision fallback",Current coverage is network payloads only. Deferred — niche evidence surface for gaming peripherals.,
implementation/ai-indexing-plans/parsing-managament/10-office-mixed-doc-ingestion.md,not_implemented,no,,deferred,"PARSING 10: Implement mixed-doc ingestion router — DOCX, XLSX, PPTX unified path",No unified mixed-doc ingestion exists. Zero code. Deferred — rare for gaming peripherals.,
