flowchart LR
  subgraph ITEM["Item Area"]
    I["Item\nproduct_id"]
    IFS["Item Field Slot\nitem_field_state.id"]
    IK["Item Key State\nkey_review_state target=grid_key"]
    I --> IFS
    IFS -. lane context .-> IK
  end

  subgraph COMPONENT["Component Area"]
    CI["Component Identity\ncomponent_identity.id"]
    CPS["Component Property Slot\ncomponent_values.id"]
    CK["Component Key State\nkey_review_state target=component_key"]
    CI --> CPS
    CPS -. lane context .-> CK
  end

  subgraph ENUM["Enum/List Area"]
    EL["Enum List\nenum_lists.id"]
    EVS["Enum Value Slot\nlist_values.id"]
    EK["Enum Key State\nkey_review_state target=enum_key"]
    EL --> EVS
    EVS -. lane context .-> EK
  end

  IFS -->|"item_component_links"| CPS
  IFS -->|"item_list_links.list_value_id"| EVS

  CPS ==>|"authoritative + variance/constraints cascade"| IFS
  EVS ==>|"accept/rename/remove cascade"| IFS

  IFS -. "never master upstream" .-> CPS
  IFS -. "never master upstream" .-> EVS

  SA["source_assertions"] -->|"item_field_state_id"| IFS
  SA -->|"component_value_id"| CPS
  SA -->|"list_value_id"| EVS
  SA -->|"enum_list_id"| EL
